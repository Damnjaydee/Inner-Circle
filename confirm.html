<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RSVP Confirmed — Inner Circle</title>
  <meta name="color-scheme" content="dark light" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b0b0b;--panel:#111;--ink:#eceae4;--muted:#bdb7a8;--line:#1f1f1f;--focus:#d1bfa0}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;display:grid;place-items:center;padding:28px}
    .wrap{width:min(720px,94vw);background:#111;border:1px solid rgba(255,255,255,.08);border-radius:24px;padding:28px 24px;box-shadow:0 22px 60px rgba(0,0,0,.6)}
    h1,h2{font-family:"DM Serif Display",serif;margin:0 0 8px}
    .sub{color:var(--muted)}
    .bar{height:2px;width:100%;background:linear-gradient(90deg, rgba(255,255,255,.06), transparent 60%);border-radius:2px;margin:10px 0 16px}
    .row{display:grid;grid-template-columns:140px 1fr;gap:12px;margin:6px 0}
    .k{color:#a99f8e;text-transform:uppercase;font-size:12px;letter-spacing:.12em}
    .v{color:#eceae4}
    .code{display:inline-block;margin-top:6px;padding:8px 12px;border:1px dashed rgba(255,255,255,.2);border-radius:10px;background:#121212}
    .foot{display:flex;justify-content:center;color:#bdb7a8;font-size:12px;margin-top:18px}
    .btn{margin-top:16px;display:inline-block;color:#fff;text-decoration:none;border:1px solid rgba(255,255,255,.12);border-radius:999px;padding:10px 16px}
  </style>
</head>
<body>
  <article class="wrap">
    <h1>RSVP Received</h1>
    <p class="sub">Thanks <span id="who"></span>. We’ve saved your details.</p>
    <div class="bar"></div>

    <div id="details">
      <div class="row"><div class="k">Name</div><div class="v" id="name"></div></div>
      <div class="row"><div class="k">Email</div><div class="v" id="email"></div></div>
      <div class="row"><div class="k">Phone</div><div class="v" id="phone"></div></div>
      <div class="row"><div class="k">Plus-one</div><div class="v" id="plus"></div></div>
      <div class="row"><div class="k">Diet</div><div class="v" id="diet"></div></div>
      <div class="row"><div class="k">Notes</div><div class="v" id="notes"></div></div>
      <div class="row"><div class="k">Check-in Code</div><div class="v"><span class="code" id="code"></span></div></div>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <a class="btn" href="./rsvp.html">Edit details</a>
      <a class="btn" href="./invite.html">View invitation</a>
    </div>
  </article>

  <div class="foot">© <span id="y"></span> Inner Circle</div>

  <script>
  document.getElementById('y').textContent = new Date().getFullYear();

  const params = new URLSearchParams(location.search);
  const codeParam = params.get('code');

  // Persist RSVP + code
  const dataJSON = sessionStorage.getItem('innercircle_rsvp');
  if (codeParam) { try { sessionStorage.setItem('innercircle_code', codeParam); } catch(_) {} }
  let code = codeParam || sessionStorage.getItem('innercircle_code') || '———';

  if (!dataJSON) {
    document.querySelector('.wrap').innerHTML = `
      <h1>No RSVP found</h1>
      <p class="sub">Please submit your details first.</p>
      <div class="bar"></div>
      <a class="btn" href="./rsvp.html">Go to RSVP</a>`;
  } else {
    const d = JSON.parse(dataJSON);
    const name = `${d.first||''} ${d.last||''}`.trim();
    document.getElementById('who').textContent = d.first || 'there';
    document.getElementById('name').textContent = name || '—';
    document.getElementById('email').textContent = d.email || '—';
    document.getElementById('phone').textContent = d.phone || '—';
    document.getElementById('plus').textContent  = d.plusone || '—';
    document.getElementById('diet').textContent  = d.diet || '—';
    document.getElementById('notes').textContent = d.notes || '—';
    document.getElementById('code').textContent  = (code+'').toUpperCase();
  }

  // OPTIONAL: auto-return to invite page with the code
  // setTimeout(() => { location.href = 'invite.html?code=' + encodeURIComponent(code); }, 1200);
  </script>
</body>
</html>
