<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LAPS After Party — Gate</title>
  <meta name="color-scheme" content="dark light" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b0b0b;--panel:#111;--ink:#eceae4;--muted:#bdb7a8;--line:#1f1f1f;--field:#121212;--field-line:#222;--focus:#d1bfa0;--red:#b91c1c;--red-strong:#991b1b}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;display:grid;place-items:center;padding:28px}
    .wrap{width:min(860px,94vw);background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:24px;padding:28px 26px;box-shadow:0 26px 70px rgba(0,0,0,.6)}
    .bar{height:1px;background:linear-gradient(90deg, rgba(255,255,255,.10), transparent 70%);border-radius:2px;margin:12px 0 16px}
    h1{font-family:"DM Serif Display",serif;font-size:clamp(36px,5.6vw,56px);margin:6px 0 2px}
    .lede{color:var(--muted);margin:6px 0 18px}
    .label{font-size:12px;letter-spacing:.18em;text-transform:uppercase;color:#a99f8e;margin:0 0 8px}
    .row{display:flex;gap:10px;align-items:center}
    input{flex:1;background:#121212;border:1px solid #222;color:#eceae4;border-radius:16px;padding:12px 14px;font:600 18px/1.2 "DM Serif Display",serif;letter-spacing:.18em;text-transform:uppercase}
    input:focus{border-color:#343027;box-shadow:0 0 0 3px rgba(209,191,160,.18)}
    .btn{appearance:none;background:linear-gradient(180deg,var(--red),var(--red-strong));color:#fff;border:1px solid rgba(255,255,255,.1);border-radius:999px;padding:12px 18px;cursor:pointer;font-family:"DM Serif Display",serif;min-width:130px}
    .err{color:#ffb3b3;font-size:14px;min-height:20px;margin-top:12px}
  </style>
</head>
<body>
  <article class="wrap">
    <div class="bar"></div>
    <h1>Enter Code</h1>
    <p class="lede">Enter your check-in code to RSVP.</p>

    <form id="gate" novalidate>
      <p class="label">Check-in Code</p>
      <div class="row">
        <input id="code" placeholder="e.g. LAPS25" maxlength="24" autofocus>
        <button class="btn" type="submit">Continue</button>
      </div>
      <div id="err" class="err"></div>
    </form>
  </article>

  <script>
    const $=s=>document.querySelector(s);
    const p=new URLSearchParams(location.search);
    const fromURL=(p.get('code')||'').toUpperCase().replace(/[^A-Z0-9]/g,'');
    const fromStore=(sessionStorage.getItem('innercircle_code')||'').toUpperCase();
    const input=$('#code'); if(fromURL||fromStore) input.value=fromURL||fromStore;
    if(fromURL) history.replaceState(null,'',location.pathname+location.hash);

    function valid(c){ return /^[A-Z0-9]{5,24}$/.test(c||''); }

    $('#gate').addEventListener('submit',e=>{
      e.preventDefault();
      const code=(input.value||'').toUpperCase().replace(/[^A-Z0-9]/g,'');
      if(!valid(code)){ $('#err').textContent='That code doesn’t look right.'; input.focus(); return; }
      try{ sessionStorage.setItem('innercircle_code', code); }catch(_){}
      location.href='rsvp.html?code='+encodeURIComponent(code);
    });
  </script>
</body>
</html>
